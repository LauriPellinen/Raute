

<h1>Monitoring-Sheets</h1>
<div class="alert alert-danger" role="alert" id="sheetserror" style="display: none;">
  Wrong username or password!
</div>

<h3 id="text-field" style="display: none;">Saving Model</h3>
<div class="spinner-border" id="spinner" style="display: none;">
    <span class="visually-hidden">Loading...</span>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="statsDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <span id="dropdown-current1" class="d-none d-md-block">Good Image
                <i class="fa fa-angle-down"></i>
            </span>
            <span class="d-block d-md-none"><i class="fa fa-plus"></i></span>
        </a>
        <ul class="dropdown-menu" aria-labelledby="statsDropdown" id="dropdown">
            <li><button class="dropdown-item" value="Good Image" href=""
                    onclick="setPicture(this);">Good Image</button></li>
            <li><button class="dropdown-item" value="Bad Image" href=""
                    onclick="setPicture(this);">Bad Image</button></li>
            <!-- <li><button class="dropdown-item" value="../assets/images/background/img6.jpg" href=""
                    onclick="setPicture(this);">Density</button></li> -->
        </ul>
    </li>
      <!-- Tab panes -->
      <div class="tab-content tabcontent-border">
        <div class="tab-pane active" id="home" role="tabpanel">
          <div id="image-box" class="p-20">
            <div id="openseadragon1" style="width: 100%; height:500px;"></div>
          </div>


        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <!-- Nav tabs -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="statsDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <span id="dropdown-current2" class="d-none d-md-block">Bad Image
                <i class="fa fa-angle-down"></i>
            </span>
            <span class="d-block d-md-none"><i class="fa fa-plus"></i></span>
        </a>
        <ul class="dropdown-menu" aria-labelledby="statsDropdown" id="dropdown2">
            <li><button class="dropdown-item" value="../assets/images/background/img4.jpg" href=""
                    onclick="setPicture(this);">Good Image</button></li>
            <li><button class="dropdown-item" value="../assets/images/background/img5.jpg" href=""
                    onclick="setPicture(this);">Bad Image</button></li>
            <!-- <li><button class="dropdown-item" value="../assets/images/background/img6.jpg" href=""
                    onclick="setPicture(this);">Density</button></li> -->
        </ul>
    </li>
      <!-- Tab panes -->
      <div class="tab-content tabcontent-border">
        <div class="tab-pane active" id="home" role="tabpanel">
          <div id="image-box" class="p-20">
            <div id="openseadragon2" style="width: 100%; height:500px;"></div>
          </div>

          

        </div>
      </div>
    </div>
  </div>

</div>
<div class="card-body">
  <h5 class="card-title">Progress</h5>
  <div class="progress mt-3">
    <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
      aria-valuemax="100" id="progress-bar"></div>
  </div>
</div>
<div class="row">
  <div class="col-md-6">


    <div class="card">


      <div class="card-body">
        <h5 class="card-title mb-0" style="position:relative;font-weight:600;margin-bottom:10px;">Model status</h5>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th scope="col" style="font-weight:bold;">Measurement</th>
            <th scope="col" style="font-weight:bold;">Value</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td>Batches</td>
            <td id="running-batch"> 0 / 0 </td>
          </tr>
          <tr>
            <td>Epochs</td>
            <td id="running-epochs"> 0 / 0 </td>
          </tr>
          </tr>
        </tbody>
      </table>

      <div class="card-body">
        <h5 class="card-title mb-0" style="position:relative;font-weight:600;margin-bottom:10px;">Model info</h5>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th scope="col" style="font-weight:bold;">Information</th>
            <th scope="col" style="font-weight:bold;">Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Model name</td>
            <td id="model-title">name value</td>
          </tr>
          <tr>
            <td>Epochs</td>
            <td id="epochs-label">epoch value</td>
          </tr>
          <tr>
            <td>Batch size</td>
            <td id="batch-label">batch value</td>
          </tr>
        </tbody>
      </table>
    </div>


  </div>


  <div class="col-md-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-0">Network structure</h5>
      </div>
      <pre id="model-structure">
        null
      </pre> 

    </div>
  </div>
</div>


</div>

</div>
<script src="/dist/js/common/functions.js"></script>
<script src="/dist/js/common/getNames.js"></script>
<script src="/dist/js/pages/monitoring/addSidebarButton.js"></script>
<script src="/dist/js/pages/monitoring/sheets_and_statistics.js"></script>


<script>
  function setPicture(select) {
    console.log(select.parentNode.parentNode.id) 
    console.log(select.innerHTML)  


    const model_title = document.getElementById("model-title").innerHTML

    if (select.parentNode.parentNode.id == "dropdown"  ){
      //viewer2.open({ type: "image", url: static_path+good_image });
      if (select.innerHTML == "Good Image"){
        load_image(model_title, "goodImage", viewer1)
      }else{load_image(model_title, "badImage", viewer1)}
      document.getElementById("dropdown-current1").innerHTML = select.innerHTML
    }
    else if (select.parentNode.parentNode.id == "dropdown2") {
      if (select.innerHTML == "Good Image"){
        load_image(model_title, "goodImage", viewer2)
      }else{load_image(model_title, "badImage", viewer2)}
      document.getElementById("dropdown-current2").innerHTML = select.innerHTML
    }
             
    var dropdown_item = document.getElementsByClassName("dropdown-item");

    $('button.dropdown-item.active').removeClass("active");
    $(select).addClass("active");
  }
      

    
</script>

<script type="text/javascript">

  //PicsDrying  PicsPeeling
  function load_image(model, good_or_bad, viewer){
    axios.get(`/team2api/results/train_good_and_bad_image/${model}`).then(function (response) {
      console.log("Response: ", response.data[0])
      var image = response.data[0]

      var image_name = image[good_or_bad].split(".")[0]
      var image_url = image_name+".bmp"

      var static_path = "../assets/images/bull/PicsPeeling/"


      console.log("Picture url: ",static_path+image_url)
      viewer.open({ type: "image", url: static_path+image_url });
      
      // Disable scrollZoom
      viewer.gestureSettingsMouse.scrollToZoom = false
      })
  }

</script>

<script type="text/javascript">

  var viewer1 = OpenSeadragon({
    id: "openseadragon1",
    prefixUrl: "../assets/images/opendragon/",
    maxZoomPixelRatio: 3.1
  });
  var viewer2 = OpenSeadragon({
    id: "openseadragon2",
    prefixUrl: "../assets/images/opendragon/",
    maxZoomPixelRatio: 3.1
  });

  load_image("RegModel", "goodImage", viewer1)
  load_image("RegModel", "badImage", viewer2)

</script>


